{"ast":null,"code":"var _jsxFileName = \"D:\\\\social-frontend\\\\src\\\\post\\\\Newsfeed.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Divider from \"@material-ui/core/Divider\";\nimport auth from \"./../auth/auth-helper\";\nimport PostList from \"./PostList\";\nimport { listNewsFeed } from \"./api-post.js\";\nimport NewPost from \"./NewPost\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  card: {\n    margin: \"auto\",\n    paddingTop: 0,\n    paddingBottom: theme.spacing(3)\n  },\n  title: {\n    padding: `${theme.spacing(3)}px ${theme.spacing(2.5)}px ${theme.spacing(2)}px`,\n    color: theme.palette.openTitle,\n    fontSize: \"1em\"\n  },\n  media: {\n    minHeight: 330\n  }\n}));\nexport default function Newsfeed() {\n  _s();\n  const classes = useStyles();\n  const [posts, setPosts] = useState([]);\n  const jwt = auth.isAuthenticated();\n  useEffect(() => {\n    const abortController = new AbortController();\n    const signal = abortController.signal;\n    listNewsFeed({\n      userId: jwt.user.id\n    }, {\n      t: jwt.accessToken\n    }, signal).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setPosts(data);\n      }\n    });\n    return function cleanup() {\n      abortController.abort();\n    };\n  }, []);\n  console.log(posts);\n  const addPost = post => {\n    const updatedPosts = [...posts];\n    updatedPosts.unshift(post);\n    setPosts(updatedPosts);\n  };\n  const removePost = post => {\n    const updatedPosts = [...posts];\n    const index = updatedPosts.indexOf(post);\n    updatedPosts.splice(index, 1);\n    setPosts(updatedPosts);\n  };\n  return /*#__PURE__*/_jsxDEV(Card, {\n    className: classes.card,\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      type: \"title\",\n      className: classes.title,\n      children: \"Newsfeed\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(NewPost, {\n      addUpdate: addPost\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PostList, {\n      removeUpdate: removePost,\n      posts: posts\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n}\n_s(Newsfeed, \"0IrisdAEFk18bWZ8wxUF2aI0j/Y=\", false, function () {\n  return [useStyles];\n});\n_c = Newsfeed;\nvar _c;\n$RefreshReg$(_c, \"Newsfeed\");","map":{"version":3,"names":["React","useState","useEffect","makeStyles","Card","Typography","Divider","auth","PostList","listNewsFeed","NewPost","useStyles","theme","card","margin","paddingTop","paddingBottom","spacing","title","padding","color","palette","openTitle","fontSize","media","minHeight","Newsfeed","classes","posts","setPosts","jwt","isAuthenticated","abortController","AbortController","signal","userId","user","id","t","accessToken","then","data","error","console","log","cleanup","abort","addPost","post","updatedPosts","unshift","removePost","index","indexOf","splice"],"sources":["D:/social-frontend/src/post/Newsfeed.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport auth from \"./../auth/auth-helper\";\r\nimport PostList from \"./PostList\";\r\nimport { listNewsFeed } from \"./api-post.js\";\r\nimport NewPost from \"./NewPost\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  card: {\r\n    margin: \"auto\",\r\n    paddingTop: 0,\r\n    paddingBottom: theme.spacing(3),\r\n  },\r\n  title: {\r\n    padding: `${theme.spacing(3)}px ${theme.spacing(2.5)}px ${theme.spacing(\r\n      2\r\n    )}px`,\r\n    color: theme.palette.openTitle,\r\n    fontSize: \"1em\",\r\n  },\r\n  media: {\r\n    minHeight: 330,\r\n  },\r\n}));\r\nexport default function Newsfeed() {\r\n  const classes = useStyles();\r\n  const [posts, setPosts] = useState([]);\r\n  const jwt = auth.isAuthenticated();\r\n\r\n  useEffect(() => {\r\n    const abortController = new AbortController();\r\n    const signal = abortController.signal;\r\n\r\n    listNewsFeed(\r\n      {\r\n        userId: jwt.user.id,\r\n      },\r\n      {\r\n        t: jwt.accessToken,\r\n      },\r\n      signal\r\n    ).then((data) => {\r\n      if (data.error) {\r\n        console.log(data.error);\r\n      } else {\r\n        setPosts(data);\r\n      }\r\n    });\r\n    return function cleanup() {\r\n      abortController.abort();\r\n    };\r\n  }, []);\r\n  console.log(posts);\r\n  const addPost = (post) => {\r\n    const updatedPosts = [...posts];\r\n    updatedPosts.unshift(post);\r\n    setPosts(updatedPosts);\r\n  };\r\n  const removePost = (post) => {\r\n    const updatedPosts = [...posts];\r\n    const index = updatedPosts.indexOf(post);\r\n    updatedPosts.splice(index, 1);\r\n    setPosts(updatedPosts);\r\n  };\r\n  return (\r\n    <Card className={classes.card}>\r\n      <Typography type=\"title\" className={classes.title}>\r\n        Newsfeed\r\n      </Typography>\r\n      <Divider />\r\n      <NewPost addUpdate={addPost} />\r\n      <Divider />\r\n      <PostList removeUpdate={removePost} posts={posts} />\r\n    </Card>\r\n  );\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,UAAU,QAAQ,0BAA0B;AACrD,OAAOC,IAAI,MAAM,wBAAwB;AACzC,OAAOC,UAAU,MAAM,8BAA8B;AACrD,OAAOC,OAAO,MAAM,2BAA2B;AAC/C,OAAOC,IAAI,MAAM,uBAAuB;AACxC,OAAOC,QAAQ,MAAM,YAAY;AACjC,SAASC,YAAY,QAAQ,eAAe;AAC5C,OAAOC,OAAO,MAAM,WAAW;AAAC;AAEhC,MAAMC,SAAS,GAAGR,UAAU,CAAES,KAAK,KAAM;EACvCC,IAAI,EAAE;IACJC,MAAM,EAAE,MAAM;IACdC,UAAU,EAAE,CAAC;IACbC,aAAa,EAAEJ,KAAK,CAACK,OAAO,CAAC,CAAC;EAChC,CAAC;EACDC,KAAK,EAAE;IACLC,OAAO,EAAG,GAAEP,KAAK,CAACK,OAAO,CAAC,CAAC,CAAE,MAAKL,KAAK,CAACK,OAAO,CAAC,GAAG,CAAE,MAAKL,KAAK,CAACK,OAAO,CACrE,CAAC,CACD,IAAG;IACLG,KAAK,EAAER,KAAK,CAACS,OAAO,CAACC,SAAS;IAC9BC,QAAQ,EAAE;EACZ,CAAC;EACDC,KAAK,EAAE;IACLC,SAAS,EAAE;EACb;AACF,CAAC,CAAC,CAAC;AACH,eAAe,SAASC,QAAQ,GAAG;EAAA;EACjC,MAAMC,OAAO,GAAGhB,SAAS,EAAE;EAC3B,MAAM,CAACiB,KAAK,EAAEC,QAAQ,CAAC,GAAG5B,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM6B,GAAG,GAAGvB,IAAI,CAACwB,eAAe,EAAE;EAElC7B,SAAS,CAAC,MAAM;IACd,MAAM8B,eAAe,GAAG,IAAIC,eAAe,EAAE;IAC7C,MAAMC,MAAM,GAAGF,eAAe,CAACE,MAAM;IAErCzB,YAAY,CACV;MACE0B,MAAM,EAAEL,GAAG,CAACM,IAAI,CAACC;IACnB,CAAC,EACD;MACEC,CAAC,EAAER,GAAG,CAACS;IACT,CAAC,EACDL,MAAM,CACP,CAACM,IAAI,CAAEC,IAAI,IAAK;MACf,IAAIA,IAAI,CAACC,KAAK,EAAE;QACdC,OAAO,CAACC,GAAG,CAACH,IAAI,CAACC,KAAK,CAAC;MACzB,CAAC,MAAM;QACLb,QAAQ,CAACY,IAAI,CAAC;MAChB;IACF,CAAC,CAAC;IACF,OAAO,SAASI,OAAO,GAAG;MACxBb,eAAe,CAACc,KAAK,EAAE;IACzB,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EACNH,OAAO,CAACC,GAAG,CAAChB,KAAK,CAAC;EAClB,MAAMmB,OAAO,GAAIC,IAAI,IAAK;IACxB,MAAMC,YAAY,GAAG,CAAC,GAAGrB,KAAK,CAAC;IAC/BqB,YAAY,CAACC,OAAO,CAACF,IAAI,CAAC;IAC1BnB,QAAQ,CAACoB,YAAY,CAAC;EACxB,CAAC;EACD,MAAME,UAAU,GAAIH,IAAI,IAAK;IAC3B,MAAMC,YAAY,GAAG,CAAC,GAAGrB,KAAK,CAAC;IAC/B,MAAMwB,KAAK,GAAGH,YAAY,CAACI,OAAO,CAACL,IAAI,CAAC;IACxCC,YAAY,CAACK,MAAM,CAACF,KAAK,EAAE,CAAC,CAAC;IAC7BvB,QAAQ,CAACoB,YAAY,CAAC;EACxB,CAAC;EACD,oBACE,QAAC,IAAI;IAAC,SAAS,EAAEtB,OAAO,CAACd,IAAK;IAAA,wBAC5B,QAAC,UAAU;MAAC,IAAI,EAAC,OAAO;MAAC,SAAS,EAAEc,OAAO,CAACT,KAAM;MAAA,UAAC;IAEnD;MAAA;MAAA;MAAA;IAAA,QAAa,eACb,QAAC,OAAO;MAAA;MAAA;MAAA;IAAA,QAAG,eACX,QAAC,OAAO;MAAC,SAAS,EAAE6B;IAAQ;MAAA;MAAA;MAAA;IAAA,QAAG,eAC/B,QAAC,OAAO;MAAA;MAAA;MAAA;IAAA,QAAG,eACX,QAAC,QAAQ;MAAC,YAAY,EAAEI,UAAW;MAAC,KAAK,EAAEvB;IAAM;MAAA;MAAA;MAAA;IAAA,QAAG;EAAA;IAAA;IAAA;IAAA;EAAA,QAC/C;AAEX;AAAC,GAnDuBF,QAAQ;EAAA,QACdf,SAAS;AAAA;AAAA,KADHe,QAAQ;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}